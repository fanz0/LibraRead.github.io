(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=document.getElementById("book-searched"),n=document.getElementById("search");n.addEventListener("click",(function(){for(;o.firstChild;)o.removeChild(o.firstChild);fetch("https://openlibrary.org/search.json?q=".concat(t.value)).then((function(e){return e.json()})).then((function(e){e&&(e.docs||[]).forEach((function(e){var t=e.cover_i;a(e.title,e.author_name,e.publish_year,t,e.key)}))})).catch((function(e){return console.log("Errore: ",e)}))}));var o=document.getElementById("elements");function a(t,n,a,r,c){var l=document.createElement("div");l.className="relative flex w-[70%] h-64 mt-8 bg-sky-200 rounded-lg gap-10 mb-10 max-[600px]:gap-1 max-[600px]:w-[100%] max-[768px]:w-[90%] max-[1024px]:w-[80%]";var i=document.createElement("img");i.src=null!=r?"https://covers.openlibrary.org/b/id/".concat(r,"-M.jpg"):"assets/images/not_found_cornice-removebg-preview.png",i.className="flex-initial h-64 max-w-52 w-1/5 max-[480px]:w-16 max-[600px]:w-32 rounded-lg";var d=document.createElement("div");d.className="w-[70%] flex flex-col gap-1";var s=document.createElement("h3");s.className="ml-10 font-bold h-16 mt-5",s.textContent=t;var u=document.createElement("h4");u.textContent=n,u.className="ml-10 font-semibold h-16";var m=document.createElement("ul");if(m.className="ml-10 h-16 overflow-y-auto",m.textContent="-Pubblicazioni-","array"==typeof a)a.forEach((function(e){var t=document.createElement("li");t.textContent=e,m.appendChild(t)}));else{var h=document.createElement("li");h.textContent=a,m.appendChild(h)}d.appendChild(s),d.appendChild(u),d.appendChild(m),l.appendChild(i),l.appendChild(d),o.appendChild(l);var f=document.createElement("p");fetch("https://openlibrary.org".concat(c,".json")).then((function(e){return e.json()})).then((function(t){if(t){var n=t.description;if(null!=n&&"object"!=e(n))f.textContent=n,f.className="my-4 overflow-y-auto hidden",l.appendChild(p);else if(null!=n&&"object"==e(n)){var o=n.value;f.textContent=o,f.className="my-4 overflow-y-auto hidden",l.appendChild(p)}}})).catch((function(e){return console.log("Errore: ",e)})),d.appendChild(f);var p=document.createElement("button");p.className="border flex-initial h-min mr-0 rounded-lg text-lg hover:bg-slate-200 w-fit max-w-40 absolute right-0",p.textContent="Trama",p.addEventListener("click",(function(){"Trama"==p.textContent?(s.classList.add("hidden"),u.classList.add("hidden"),m.classList.add("hidden"),f.classList.remove("hidden"),p.textContent="Indietro"):(s.classList.remove("hidden"),u.classList.remove("hidden"),m.classList.remove("hidden"),f.classList.add("hidden"),p.textContent="Trama")}))}var r=document.getElementById("select");r.addEventListener("change",(function(){n.addEventListener("click",(function(){for(;o.firstChild;)o.removeChild(o.firstChild);"Argomento"==r.value?fetch("https://openlibrary.org/subjects/".concat(t.value,".json?limit=100")).then((function(e){return e.json()})).then((function(e){e&&e.works.forEach((function(e){var t=e.cover_id,n=e.title,o=e.authors,r=e.first_publish_year,c=e.key;o.forEach((function(e){var o=Object.values(e)[1];a(n,o,r,t,c)}))}))})).catch((function(e){return console.log(e)})):"Tutto"==r.value&&fetch("https://openlibrary.org/search.json?q=".concat(t.value)).then((function(e){return e.json()})).then((function(e){e&&(e.docs||[]).forEach((function(e){var t=e.cover_i;a(e.title,e.author_name,e.publish_year,t,e.key)}))})).catch((function(e){return console.log(e)}))}))}))})();